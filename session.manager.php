<?php
if(isset($_SESSION['malware-repository-state'])){
    switch($_SESSION['malware-repository-state']){
        case 'loggedin':loggedIn(); break;
        case 'notloggedin': signin();break;
        case 'signup': signup();break;
        case 'forgot':forgotPassword();break;
        case 'home':nonePage();break;
        default: signin();
    }
}
else{
    $_SESSION['malware-repository-state'] = 'home';
    echo("<script>location.href = './';</script>");
}

if(isset($_GET['page'])) {
    if ($_GET['page'] === 'signup'){
        $_SESSION['malware-repository-state'] = 'signup';

    }
    else if ($_GET['page'] === 'signin'){
        $_SESSION['malware-repository-state'] = 'notloggedin';

    }
    else if ($_GET['page'] === 'forgot'){
        $_SESSION['malware-repository-state'] = 'forgot';

    }
    else if ($_GET['page'] === 'loggedin' && isset($_SESSION['username'])){
        $_SESSION['malware-repository-state'] = 'loggedin';
    }
    else if ($_GET['page'] === 'home'){
        $_SESSION['malware-repository-state'] = 'home';

    }
    else if ($_GET['page'] === 'logout'){
       logout();

    }
    echo("<script>location.href = './';</script>");
}
function loggedIn(){
echo '<div class="row" style="margin: 20px 0">
    <div class="col-md-6 col-xl-3 mb-4">
        <div class="card shadow border-left-primary py-2">
            <div class="card-body">
                <div class="row align-items-center no-gutters">
                    <div class="col mr-2">
                        <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>Total Number of Samples</span></div>
                        <div class="text-dark font-weight-bold h5 mb-0"><span>400</span></div>
                    </div>
                    <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3 mb-4">
        <div class="card shadow border-left-success py-2">
            <div class="card-body">
                <div class="row align-items-center no-gutters">
                    <div class="col mr-2">
                        <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>Your Sample Uploads</span></div>
                        <div class="text-dark font-weight-bold h5 mb-0"><span>2</span></div>
                    </div>
                    <div class="col-auto"><i class="fas fa-upload fa-2x text-gray-300"></i></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3 mb-4">
        <div class="card shadow border-left-info py-2">
            <div class="card-body">
                <div class="row align-items-center no-gutters">
                    <div class="col mr-2">
                        <div class="text-uppercase text-info font-weight-bold text-xs mb-1"><span>Your Sample Downloads</span></div>
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="text-dark font-weight-bold h5 mb-0 mr-3"><span>50</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto"><i class="fas fa-download fa-2x text-gray-300"></i></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3 mb-4">
        <div class="card shadow border-left-warning py-2">
            <div class="card-body">
                <div class="row align-items-center no-gutters">
                    <div class="col mr-2">
                        <div class="text-uppercase text-warning font-weight-bold text-xs mb-1"><span>Pending Requests</span></div>
                        <div class="text-dark font-weight-bold h5 mb-0"><span>18</span></div>
                    </div>
                    <div class="col-auto"><i class="fas fa-comments fa-2x text-gray-300"></i></div>
                </div>
            </div>
        </div>
    </div>
</div>';
}
function signup(){
echo '<div class="card shadow-lg o-hidden border-0 my-5">
            <div class="card-body p-0">
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-flex">
                        <div class="flex-grow-1 bg-register-image" style="background-image: url(&quot;assets/img/dogs/image2.jpeg&quot;);"></div>
                    </div>
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <h4 class="text-dark mb-4">Create an Account!</h4>
                            </div>
                            <form class="user" method="post" action="">
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0"><input class="form-control form-control-user" type="text" id="exampleFirstName" placeholder="First Name" name="first_name"></div>
                                    <div class="col-sm-6"><input class="form-control form-control-user" type="text" id="exampleFirstName" placeholder="Last Name" name="last_name"></div>
                                </div>
                                <div class="form-group"><input class="form-control form-control-user" type="email" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Email Address" name="email"></div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0"><input class="form-control form-control-user" type="password" id="examplePasswordInput" placeholder="Password" name="password"></div>
                                    <div class="col-sm-6"><input class="form-control form-control-user" type="password" id="exampleRepeatPasswordInput" placeholder="Repeat Password" name="password_repeat"></div>
                                </div><button class="btn btn-primary btn-block text-white btn-user" type="submit">Register Account</button>
                                <hr><a class="btn btn-primary btn-block text-white btn-google btn-user" role="button"><i class="fab fa-google"></i>&nbsp; Register with Google</a><a class="btn btn-primary btn-block text-white btn-facebook btn-user" role="button"><i class="fab fa-facebook-f"></i>&nbsp; Register with Facebook</a>
                                <hr>
                            </form>
                            <div class="text-center"><a class="small" href="./?page=forgot">Forgot Password?</a></div>
                            <div class="text-center"><a class="small" href="./?page=signin">Already have an account? Login!</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>';
}
function signin(){
echo '<div class="row justify-content-center"><div class="col-md-9 col-lg-12 col-xl-10">
            <div class="card shadow-lg o-hidden border-0 my-5">
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-6 d-none d-lg-flex">
                            <div class="flex-grow-1 bg-login-image" style="background-image: url(&quot;assets/img/dogs/image3.jpeg&quot;);"></div>
                        </div>
                        <div class="col-lg-6">
                            <div class="p-5">
                                <div class="text-center">
                                    <h4 class="text-dark mb-4">Welcome Back!</h4>
                                </div>
                                <form class="user" method="post" action="user.manager.php">
                                    <div class="form-group"><input class="form-control form-control-user" type="email" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Enter Email Address..." name="email"></div>
                                    <div class="form-group"><input class="form-control form-control-user" type="password" id="exampleInputPassword" placeholder="Password" name="password"></div>
                                    <div class="form-group">
                                        <div class="custom-control custom-checkbox small">
                                            <div class="form-check"><input class="form-check-input custom-control-input" type="checkbox" id="formCheck-1"><label class="form-check-label custom-control-label" for="formCheck-1">Remember Me</label></div>
                                        </div>
                                    </div><button class="btn btn-primary btn-block text-white btn-user" type="submit">Login</button>
                                    <hr><a class="btn btn-primary btn-block text-white btn-google btn-user" role="button"><i class="fab fa-google"></i>&nbsp; Login with Google</a><a class="btn btn-primary btn-block text-white btn-facebook btn-user" role="button"><i class="fab fa-facebook-f"></i>&nbsp; Login with Facebook</a>
                                    <hr>
                                </form>
                                <div class="text-center"><a class="small" href="./?page=forgot">Forgot Password?</a></div>
                                <div class="text-center"><a class="small" href="./?page=signup">Create an Account!</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div></div>';
}
function forgotPassword(){
    echo '<div class="row justify-content-center">
            <div class="col-md-9 col-lg-12 col-xl-10">
                <div class="card shadow-lg o-hidden border-0 my-5">
                    <div class="card-body p-0">
                        <div class="row">
                            <div class="col-lg-6 d-none d-lg-flex">
                                <div class="flex-grow-1 bg-password-image" style="background-image: url(&quot;assets/img/dogs/image1.jpeg&quot;);"></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="p-5">
                                    <div class="text-center">
                                        <h4 class="text-dark mb-2">Forgot Your Password?</h4>
                                        <p class="mb-4">We get it, stuff happens. Just enter your email address below and we\'ll send you a link to reset your password!</p>
                                    </div>
                                    <form class="user">
                                        <div class="form-group"><input class="form-control form-control-user" type="email" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Enter Email Address..." name="email"></div><button class="btn btn-primary btn-block text-white btn-user"
                                            type="submit">Reset Password</button></form>
                                    <div class="text-center">
                                        <hr><a class="small" href="./?page=signup">Create an Account!</a></div>
                                    <div class="text-center"><a class="small" href="./?page=signin">Already have an account? Login!</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>';
}
function nonePage(){
    echo '<div class="row">
<div class="row justify-content-center">
            <div class="col-md-12 col-lg-12 col-xl-12" style="margin: 20px">
            <div class="card card-3" style="position: relative;">
            <img src="./assets/img/background.jpg" class="img-fluid"/>
            <div style="position: absolute; top: 8px; right: 16px; font-size: 18px; ">Malware hides in plain sight</div>
            </div>
            </div>
            </div>
<div class="col-md-6 col-lg-6 col-xl-6" style="margin: 20px 0" >
<div class="card card-3">
    <div class="card-body">
        <h4 class="card-title">Are you infested with malware?</h4>
        <h6 class="text-muted card-subtitle mb-2">Easy step by step discovery.</h6>
        <p class="card-text">Our Application allows you to discsover if your computer is infested with Malware or a Hardware issue. Sometimes it is hard to distinguish between hardware
        failures or hardware bottlenecks that can result to your system acting up and slowing down.</p>
        <a class="card-link" href="#">Start Now</a><a class="card-link" href="#">Learn More</a></div>
</div></div>
<div class="col-md-6 col-lg-6 col-xl-6" style="margin: 20px 0">
<div class="card card-3">
    <div class="card-body">
        <h4 class="card-title">Download Malware Samples</h4>
        <h6 class="text-muted card-subtitle mb-2">Easy to download and set up</h6>
        <p class="card-text">Once you log in, you can easily download and extract Malware Samples.</p>
        <p class="text-danger card-text"><strong>Samples are purely for research and academic purposes only.</strong></p>
        <a class="card-link" href="#">Start Now</a><a class="card-link" href="#">Learn More</a></div>
</div></div>
</div>
<div class="row">
<div class="col-md-6 col-lg-6 col-xl-6" style="margin: 20px 0">
<div class="card card-3">
    <div class="card-body">
        <h4 class="card-title">Upload Malware Samples</h4>
        <h6 class="text-muted card-subtitle mb-2">Sharing is caring.</h6>
        <p class="card-text">
        Uploading malware samples assists the community to research on the Malware and come up with better engines to 
        curb malware, detect them and come up with smarter ways of detecting and handling Malware.
</p><a class="card-link" href="#">Start Now</a><a class="card-link" href="#">Learn More</a></div>
</div></div>
<div class="col-md-6 col-lg-6 col-xl-6" style="margin: 20px 0">
<div class="card card-3">
    <div class="card-body">
        <h4 class="card-title">Collaborate and Share information.</h4>
        <h6 class="text-muted card-subtitle mb-2">Share important information with the community</h6>
        <p class="card-text">
        The vastness of knowledge and information is unmatched. Any information shared helps the community grow and helps
        better understand Malware for all users in the community.
</p><a class="card-link" href="#">Learn More</a></div>
</div></div>
</div>';
}
function logout(){
    session_destroy();
}